---
import { PortableText } from 'astro-portabletext';
import Carousel from '../Carousel.astro';
import PageIntro from '../PageIntro.astro';
import ProjectList from '../ProjectList.astro';

const { data } = Astro.props;

// DEBUG: Log de volledige data structuur
if (import.meta.env.DEV) {
  console.log('ğŸ  Home data received:', JSON.stringify(data, null, 2));
  console.log('ğŸ  Data source:', data?.dataSource);
  console.log('ğŸ  Data type:', data?._type);
  console.log('ğŸ  Page type:', data?.pageType);
}

// Sanity data structure
const slides = data?.slides || [];
const projects = data?.featuredProjects || [];
const introCols = data?.introCols || [];

// Extract intro en statement uit introCols
const intro = introCols[0]?.content || [];
const statement = introCols[1]?.content || [];

// Geen fallback - laat errors zien als data mist
if (import.meta.env.DEV) {
  if (introCols.length === 0) {
    console.error('âŒ introCols is leeg in Sanity data');
  }
  if (intro.length === 0) {
    console.warn('âš ï¸ intro (eerste kolom) is leeg');
  }
  if (statement.length === 0) {
    console.warn('âš ï¸ statement (tweede kolom) is leeg');
  }
}
---

<Carousel {slides} />

<PageIntro class="home">
  <Fragment slot="column-one">
    <PortableText value={intro} />
  </Fragment>
  <Fragment slot="column-two">
    <PortableText value={statement} />
  </Fragment>
</PageIntro>

<ProjectList {projects} layout="grid" />
